@model CombinedResponseDto

<div class="social__icons">
    @foreach (var item in Model.Links)
    {
        <div class="icon__card">
            <a href="@item.LinkUrl" class="icon">
                <span class="icon-text">@item.LinkName</span>
            </a>

            <form action="/ShareProfile/RemoveLink" method="post">
                <input type="hidden" name="id" value="@item.LinkeID" />
                <button type="submit" class="remove-link-button" data-link-name="@item.LinkName">
                    X
                </button>
            </form>

        </div>
    }
</div>

<form id="add-social-icon-form" asp-action="AddLink" method="post">
    <span class="add-text1">BAŞLIK</span>
    <input type="text" id="LinkName" name="LinkName" placeholder="Açıklama" required />

    <span class="add-text1">URL ADRESİ</span>
    <input type="url" id="LinkUrl" name="LinkUrl" placeholder="URL" required />

    <button id="dynamic-button" class="icon" type="submit">
        <span class="add-text">Kaydet</span>
    </button>
</form>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // X butonlarına tıklama olayını dinle
        document.querySelectorAll('.remove-link-button').forEach(button => {
            button.addEventListener('click', function (event) {
                event.preventDefault(); // Formun normal submit işlemini engelle

                const form = this.closest('form');
                const linkName = this.getAttribute('data-link-name');

                Swal.fire({
                    title: 'Emin misiniz?',
                    text: `Bu bağlantıyı kaldırmak istediğinizden emin misiniz? ${linkName}`,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Evet, kaldır!',
                    cancelButtonText: 'Hayır, iptal et'
                }).then((result) => {
                    if (result.isConfirmed) {
                        form.submit(); // Onaylandıysa formu gönder
                    }
                });
            });
        });
    });
</script>
